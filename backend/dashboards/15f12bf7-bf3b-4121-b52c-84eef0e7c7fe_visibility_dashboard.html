<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard GEO - Tests de Visibilit√© IA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            text-align: center;
        }
        
        .header h1 {
            color: #1a1a1a;
            font-size: 42px;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .header .site-info {
            font-size: 18px;
            color: #666;
            margin: 10px 0;
        }
        
        .score-global {
            font-size: 72px;
            font-weight: bold;
            text-align: center;
            margin: 30px 0;
            padding: 50px;
            border-radius: 20px;
            background: white;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        
        .score-critical { color: #dc3545; }
        .score-warning { color: #ffc107; }
        .score-good { color: #28a745; }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .metric-tile {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .metric-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }
        
        .metric-tile:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.2);
        }
        
        .metric-tile:hover::before {
            transform: scaleX(1);
        }
        
        .metric-tile.clickable::after {
            content: 'üîç';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            opacity: 0.3;
            transition: opacity 0.3s;
        }
        
        .metric-tile:hover.clickable::after {
            opacity: 1;
        }
        
        .metric-label {
            font-size: 13px;
            color: #999;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .metric-value {
            font-size: 42px;
            font-weight: 700;
            margin: 15px 0;
            color: #1a1a1a;
        }
        
        .metric-change {
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .trend-up { color: #28a745; }
        .trend-down { color: #dc3545; }
        .trend-neutral { color: #6c757d; }
        
        .platform-table {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        
        .platform-table h2 {
            color: #1a1a1a;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 700;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        th:first-child {
            border-top-left-radius: 12px;
        }
        
        th:last-child {
            border-top-right-radius: 12px;
        }
        
        td {
            padding: 18px;
            border-bottom: 1px solid #e9ecef;
            transition: background 0.2s;
        }
        
        tr:hover td {
            background: #f8f9fa;
        }
        
        td.clickable-cell {
            cursor: pointer;
            position: relative;
        }
        
        td.clickable-cell:hover {
            background: #e9ecef;
        }
        
        .status-visible {
            color: #28a745;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-invisible {
            color: #dc3545;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-close {
            position: absolute;
            top: 25px;
            right: 25px;
            font-size: 36px;
            cursor: pointer;
            color: #999;
            transition: color 0.2s, transform 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            color: #dc3545;
            background: #fee;
            transform: rotate(90deg);
        }
        
        .detail-section {
            margin: 30px 0;
        }
        
        .detail-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1a1a1a;
        }
        
        .reason-card {
            background: #f8f9fa;
            border-left: 5px solid #dc3545;
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .reason-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .reason-card.severity-critical {
            border-color: #dc3545;
            background: linear-gradient(to right, #fff5f5 0%, #ffffff 100%);
        }
        
        .reason-card.severity-high {
            border-color: #ff8c00;
            background: linear-gradient(to right, #fff8f0 0%, #ffffff 100%);
        }
        
        .reason-card.severity-medium {
            border-color: #ffc107;
            background: linear-gradient(to right, #fffef0 0%, #ffffff 100%);
        }
        
        .reason-card h4 {
            margin: 0 0 15px 0;
            color: #1a1a1a;
            font-size: 18px;
        }
        
        .reason-card p {
            margin: 10px 0;
            line-height: 1.6;
            color: #555;
        }
        
        .action-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin: 12px 8px 12px 0;
            transition: all 0.3s;
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .action-button:active {
            transform: translateY(0);
        }
        
        .add-query-form {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        
        .add-query-form h2 {
            color: #1a1a1a;
            margin-bottom: 25px;
            font-size: 28px;
            font-weight: 700;
        }
        
        .form-group {
            margin: 25px 0;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 15px;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .query-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }
        
        .query-item {
            background: linear-gradient(to right, #f8f9fa 0%, #ffffff 100%);
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid #667eea;
        }
        
        .query-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .delete-query {
            color: #dc3545;
            cursor: pointer;
            font-size: 24px;
            transition: opacity 0.2s, transform 0.2s;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .delete-query:hover {
            opacity: 0.7;
            background: #fee;
            transform: scale(1.1);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üîç Tests de Visibilit√© IA</h1>
            <div class="site-info"><strong>Site:</strong> https:///maibec.com</div>
            <div class="site-info"><strong>Entreprise:</strong> </div>
            <div class="site-info"><strong>Derni√®re mise √† jour:</strong> 14 November 2025 √† 15:10</div>
        </div>
        
        <!-- Score Global -->
        <div class="score-global score-score-good">
            Score de Visibilit√©: <span id="visibility-score">100.0</span>%
        </div>
        
        <!-- M√©triques cliquables -->
        <div class="metrics-grid" id="metrics-grid">
            <!-- Sera rempli par JavaScript -->
        </div>
        
        <!-- Tableau des requ√™tes -->
        <div class="platform-table">
            <h2>üìã Requ√™tes Test√©es & R√©sultats</h2>
            <table>
                <thead>
                    <tr>
                        <th>Requ√™te</th>
                        <th>ChatGPT</th>
                        <th>Claude</th>
                        <th>Perplexity</th>
                        <th>Gemini</th>
                        <th>Google AI</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="queries-tbody">
                    <!-- Sera rempli par JavaScript -->
                </tbody>
            </table>
        </div>
        
        <!-- Formulaire ajout de requ√™te -->
        <div class="add-query-form">
            <h2>‚ûï Ajouter une Requ√™te Personnalis√©e</h2>
            <p style="color: #666; margin-bottom: 20px;">
                Ajoutez vos propres requ√™tes pour tester votre visibilit√© sur des termes sp√©cifiques.
            </p>
            <form id="add-query-form">
                <div class="form-group">
                    <label for="new-query">Requ√™te √† tester</label>
                    <input type="text" id="new-query" placeholder="Ex: meilleurs courtiers assurance Montr√©al" required>
                </div>
                
                <div class="form-group">
                    <label for="query-priority">Priorit√©</label>
                    <select id="query-priority">
                        <option value="high">Haute - Test imm√©diat</option>
                        <option value="medium" selected>Moyenne - Test dans 1h</option>
                        <option value="low">Basse - Test prochain run (2 semaines)</option>
                    </select>
                </div>
                
                <button type="submit" class="action-button">
                    Ajouter et Tester
                </button>
            </form>
            
            <h3 style="margin-top: 40px; color: #1a1a1a; font-size: 22px;">Requ√™tes Personnalis√©es Actives</h3>
            <ul class="query-list" id="custom-queries-list">
                <li class="query-item" style="background: #f0f0f0; border-left-color: #999;">
                    <span style="color: #999;">Aucune requ√™te personnalis√©e pour le moment</span>
                </li>
            </ul>
        </div>
    </div>
    
    <!-- Modal de d√©tails -->
    <div class="modal" id="details-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div id="modal-body">
                <!-- Contenu dynamique -->
            </div>
        </div>
    </div>
    
    <script>
        // Charger les donn√©es depuis le JSON
        let queryData = {"site_url": "https:///maibec.com", "company_name": "", "last_updated": "2025-11-14T15:03:53.663087", "queries": [{"query": "meilleur gestion compl√®te de la paie qu√©bec", "timestamp": "2025-11-14T15:03:53.663205", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleurs logiciels de gestion de la paie au Qu√©bec\n\nVoici les solutions les plus performantes pou...", "competitors_mentioned": [], "full_response": "# Meilleurs logiciels de gestion de la paie au Qu√©bec\n\nVoici les solutions les plus performantes pour la paie qu√©b√©coise :\n\n## **Solutions compl√®tes recommand√©es**\n\n### **1. Nethris** ‚≠ê (Choix populaire qu√©b√©cois)\n- 100% qu√©b√©cois et bilingue\n- Conformit√© totale aux normes du Qu√©bec\n- Int√©gration CNESST, Revenu Qu√©bec, ARC\n- Excellent support client local\n- Gestion RH compl√®te\n\n### **2. PayFactory (ADP)**\n- Leader canadien\n- Sp√©cialis√© pour le Qu√©bec\n- Gestion multi-provinces\n- Robuste pour grandes entreprises\n\n### **3. Rise (anciennement PayEvolution)**\n- Solution qu√©b√©coise\n- Interface intuitive\n- Bon pour PME\n- Support en fran√ßais\n\n### **4. Humi**\n- Plateforme canadienne moderne\n- RH + paie int√©gr√©e\n- Tarifs transparents\n- Excellent pour PME\n\n## **Crit√®res importants pour le Qu√©bec**\n\n‚úÖ Conformit√© RRQ, RQAP, CNESST\n‚úÖ Relev√©s 1 et T4 automatiques\n‚úÖ Support en fran√ßais\n‚úÖ Calculs des retenues qu√©b√©coises\n‚úÖ Int√©gration comptable (Sage, QuickBooks)\n\n## **Recommandations selon la taille**\n\n- **TPE (1-10)**: Rise, Humi\n- **PME (10-100)**: Nethris, Humi\n- **Grandes (100+)**: ADP, Nethris\n\nSouhaitez-vous des d√©tails sur une solution sp√©cifique?", "response_length": 1156, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur externalisation comptable qu√©bec", "timestamp": "2025-11-14T15:04:07.571552", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleures options d'externalisation comptable au Qu√©bec\n\n## Services recommand√©s\n\n### **1. Cabine...", "competitors_mentioned": ["Morin & Associ√©s"], "full_response": "# Meilleures options d'externalisation comptable au Qu√©bec\n\n## Services recommand√©s\n\n### **1. Cabinets comptables traditionnels**\n- **Raymond Chabot Grant Thornton** - Leader au Qu√©bec\n- **Mallette** - Expertise PME\n- **Samson B√©lair/Deloitte**\n- **BDO Canada**\n\n### **2. Services d'impartition sp√©cialis√©s**\n- **T2inc** - Sp√©cialiste comptabilit√© PME et startups\n- **Libeo** - Solutions technologiques et impartition\n- **Morin & Associ√©s** - Externalisation compl√®te\n\n### **3. Solutions technologiques**\n- **Plooto** - Automatisation paiements\n- **QuickBooks en ligne** avec comptable certifi√©\n- **Sage** avec services d'accompagnement\n\n## Crit√®res de s√©lection\n\n### √Ä consid√©rer:\n‚úÖ **Expertise sectorielle** (votre industrie)\n‚úÖ **Certification CPA** (obligatoire au Qu√©bec)\n‚úÖ **Technologies utilis√©es** (cloud, int√©grations)\n‚úÖ **Tarification transparente**\n‚úÖ **Services bilingues** (si n√©cessaire)\n‚úÖ **Proximit√© g√©ographique** ou service virtuel\n‚úÖ **R√©f√©rences v√©rifiables**\n\n## Services typiquement externalis√©s\n\n- Tenue de livres\n- Paie et d√©clarations (DAS, Relev√© 1)\n- TPS/TVQ\n- √âtats financiers\n- D√©clarations fiscales\n- Contr√¥le de gestion\n\n**Conseil**: Commencez par d√©finir vos besoins pr√©cis avant de solliciter des soumissions.\n\nQuel type de service recherchez-vous sp√©cifiquement?", "response_length": 1293, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur conseil fiscal et optimisation qu√©bec", "timestamp": "2025-11-14T15:04:21.532287", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleurs conseils fiscaux et optimisation au Qu√©bec\n\n## üéØ Strat√©gies prioritaires\n\n### 1. **REER ...", "competitors_mentioned": [], "full_response": "# Meilleurs conseils fiscaux et optimisation au Qu√©bec\n\n## üéØ Strat√©gies prioritaires\n\n### 1. **REER (R√©gime enregistr√© d'√©pargne-retraite)**\n- D√©duction fiscale imm√©diate (jusqu'√† 48% d'√©conomie combin√©e)\n- Cotisation maximale : 18% du revenu (max ~31 560$ en 2024)\n- Id√©al si revenu > 50 000$\n\n### 2. **CELI (Compte d'√©pargne libre d'imp√¥t)**\n- Gains non imposables √† vie\n- Plafond cumulatif : 95 000$ (2024)\n- Priorit√© si revenu < 50 000$ ou objectifs court/moyen terme\n\n### 3. **Fractionnement de revenu**\n- REEE pour enfants (subventions 30-40%)\n- Dividendes au conjoint √† revenu plus faible\n- Compte conjoint strat√©gique\n\n### 4. **Cr√©dits d'imp√¥t sp√©cifiques au Qu√©bec**\n- **Frais de garde** : remboursement jusqu'√† 75%\n- **R√©novation √âcoR√©nov** : cr√©dit 20% (max 2 500$)\n- **Maintien √† domicile des a√Æn√©s** : jusqu'√† 6 460$\n- **Transport en commun** : cr√©dit disponible\n\n### 5. **D√©ductions souvent oubli√©es**\n- T√©l√©travail (bureau √† domicile)\n- Frais m√©dicaux (seuil bas au Qu√©bec)\n- Cotisations professionnelles et syndicales\n- Int√©r√™ts sur pr√™ts √©tudiants\n\n## üíº Pour travailleurs autonomes/incorpor√©s\n\n- **Incorporation** si revenu > 100 000$\n- D√©duction petite entreprise (taux r√©duit 11,5%)\n- Dividendes vs salaire (optimiser selon situation)", "response_length": 1253, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur cr√©ation et immatriculation d'entreprise qu√©bec", "timestamp": "2025-11-14T15:04:36.961013", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleure option pour cr√©er et immatriculer une entreprise au Qu√©bec\n\n## Options d'immatriculation...", "competitors_mentioned": [], "full_response": "# Meilleure option pour cr√©er et immatriculer une entreprise au Qu√©bec\n\n## Options d'immatriculation\n\n### 1. **Entreprise individuelle (travailleur autonome)**\n- ‚úÖ **Plus simple et rapide**\n- ‚úÖ Co√ªt minimal (~50-100$)\n- ‚ö†Ô∏è Aucune protection des actifs personnels\n- Id√©al pour : d√©buter seul, petits projets\n\n### 2. **Soci√©t√© par actions (inc.)**\n- ‚úÖ Protection des actifs personnels\n- ‚úÖ Avantages fiscaux importants\n- ‚úÖ Cr√©dibilit√© accrue\n- ‚ö†Ô∏è Plus complexe, comptabilit√© obligatoire\n- Co√ªt : ~300-500$ (DIY) ou 800-2000$ (avec notaire/avocat)\n- **Recommand√©e si** : revenus >50 000$/an\n\n### 3. **SENC (Soci√©t√© en nom collectif)**\n- Pour partenariats\n- Responsabilit√© partag√©e\n\n## O√π immatriculer\n\n### **Registraire des entreprises du Qu√©bec (REQ)**\n- Site officiel : **registreentreprises.gouv.qc.ca**\n- En ligne, 24/7\n- Co√ªt le plus bas\n- ‚úÖ **Meilleure option pour faire soi-m√™me**\n\n### Services professionnels recommand√©s\n\n1. **LegalZoom / Lex Start** (~500-800$)\n2. **Notaires/avocats** (1000-2000$)\n3. **Comptables** (peuvent aussi aider)\n\n## √âtapes recommand√©es\n\n1. ‚úîÔ∏è V√©rifier disponibilit√© du nom (REQ)\n2. ‚úîÔ∏è Choisir structure juridique\n3. ‚úîÔ∏è S'immatriculer au REQ\n4. ‚úîÔ∏è Ouvrir compte bancaire d'entreprise\n5. ‚úî", "response_length": 1219, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur assistance juridique et sociale qu√©bec", "timestamp": "2025-11-14T15:04:52.593616", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleures ressources d'assistance juridique et sociale au Qu√©bec\n\n## **Aide juridique gratuite**\n...", "competitors_mentioned": [], "full_response": "# Meilleures ressources d'assistance juridique et sociale au Qu√©bec\n\n## **Aide juridique gratuite**\n\n### **Commission des services juridiques**\n- **T√©l√©phone** : 1-844-839-0098\n- Services juridiques gratuits selon le revenu\n- Couvre criminel, familial, immigration, logement\n\n### **Centres communautaires juridiques**\nPr√©sents dans toutes les r√©gions pour consultation gratuite\n\n## **Ligne d'√©coute et r√©f√©rence**\n\n### **Info-Social 811**\n- Disponible 24/7\n- √âvaluation de situations sociales\n- R√©f√©rences vers ressources appropri√©es\n\n### **Tel-Aide** : 514-935-1101\n- √âcoute anonyme et confidentielle\n\n## **Aide sociale et financi√®re**\n\n### **Services Qu√©bec**\n- **T√©l√©phone** : 1-877-644-4545\n- Aide sociale, solidarit√© sociale\n- Soutien aux personnes handicap√©es\n\n## **Logement**\n\n### **Tribunal administratif du logement (TAL)**\n- **T√©l√©phone** : 1-855-645-8385\n- Conflits locateur-locataire gratuits\n\n### **FRAPRU** : d√©fense des droits des locataires\n\n## **Autres ressources importantes**\n\n- **DPJ (Protection de la jeunesse)** : 1-800-361-8665\n- **Carrefour jeunesse-emploi** (moins de 35 ans)\n- **Centres de femmes** pour violence conjugale\n- **Organismes communautaires** par quartier\n\n**Besoin sp√©cifique?** Je peux vous diriger plus pr√©cis√©ment.", "response_length": 1256, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur r√©vision comptable et audit qu√©bec", "timestamp": "2025-11-14T15:05:05.348271", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleures firmes de r√©vision comptable et audit au Qu√©bec\n\n## Grands cabinets internationaux (Big...", "competitors_mentioned": ["Ernst & Young"], "full_response": "# Meilleures firmes de r√©vision comptable et audit au Qu√©bec\n\n## Grands cabinets internationaux (Big Four)\n\n1. **Deloitte**\n   - Leader au Qu√©bec\n   - Expertise en grandes entreprises et soci√©t√©s cot√©es\n\n2. **PwC (PricewaterhouseCoopers)**\n   - Services vari√©s, forte pr√©sence √† Montr√©al\n\n3. **KPMG**\n   - Sp√©cialisation en audit et conformit√©\n\n4. **EY (Ernst & Young)**\n   - Expertise en services-conseils et audit\n\n## Firmes qu√©b√©coises de renom\n\n5. **Raymond Chabot Grant Thornton (RCGT)**\n   - Plus grand cabinet qu√©b√©cois\n   - Excellente r√©putation locale\n\n6. **Mazars**\n   - Pr√©sence internationale avec expertise locale\n\n7. **MNP (Mallette)**\n   - Fort en PME et organismes sans but lucratif\n\n8. **Richter**\n   - Sp√©cialisation en restructuration et insolvabilit√©\n\n## Crit√®res de s√©lection\n\n- **Taille de votre entreprise** : PME vs grande entreprise\n- **Secteur d'activit√©** : certaines firmes ont des expertises sectorielles\n- **Budget** : les Big Four sont g√©n√©ralement plus dispendieux\n- **Proximit√© g√©ographique**\n- **Services compl√©mentaires** : fiscalit√©, conseil, etc.\n\n**Conseil** : Demandez des r√©f√©rences et rencontrez plusieurs firmes avant de choisir.\n\nAvez-vous des besoins sp√©cifiques?", "response_length": 1207, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur accompagnement √† la digitalisation qu√©bec", "timestamp": "2025-11-14T15:05:15.826000", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleurs accompagnements √† la digitalisation au Qu√©bec\n\n## **Programmes gouvernementaux**\n\n### **...", "competitors_mentioned": [], "full_response": "# Meilleurs accompagnements √† la digitalisation au Qu√©bec\n\n## **Programmes gouvernementaux**\n\n### **1. Investissement Qu√©bec**\n- Programme ESSOR (transformations num√©riques)\n- Financement et accompagnement personnalis√©\n- Subventions pour PME\n\n### **2. Programme Entreprises Num√©rique**\n- Diagnostics num√©riques gratuits\n- Jusqu'√† 15 000 $ en soutien financier\n- Accompagnement par des experts\n\n### **3. Services Qu√©bec - PME**\n- Conseils en transformation num√©rique\n- R√©f√©rences vers des ressources sp√©cialis√©es\n\n## **Organismes d'accompagnement**\n\n### **Centre d'entreprises et d'innovation (CEI)**\n- Pr√©sents dans plusieurs r√©gions\n- Coaching sp√©cialis√© en num√©rique\n\n### **PME MTL**\n- Services pour entreprises montr√©alaises\n- Diagnostics et formations num√©riques\n\n### **Chambres de commerce locales**\n- Formations et ateliers\n- R√©seautage et partenariats\n\n## **Consultants et agences sp√©cialis√©es**\n\n- **BDC Conseil** (Banque de d√©veloppement du Canada)\n- **Digitad** - Marketing num√©rique\n- **Libeo** - Transformation digitale\n- **Adviso** - Strat√©gie num√©rique\n\n## **Formations et certifications**\n\n- **√âcole des entrepreneurs du Qu√©bec**\n- **HEC Montr√©al** - Formation continue\n- **Universit√© Laval** - Programmes courts\n\n**Conseil:** Commencez par un diagnostic num√©rique gratuit offert par le gouvernement pour identifier vos besoins sp√©cifiques.\n\nAvez-vous un secteur d'activit√© particulier?", "response_length": 1401, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "meilleur business plan et pr√©visionnel qu√©bec", "timestamp": "2025-11-14T15:05:28.399154", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Meilleur Business Plan et Pr√©visionnel au Qu√©bec üçÅ\n\n## **Logiciels recommand√©s pour le Qu√©bec**\n\n#...", "competitors_mentioned": [], "full_response": "# Meilleur Business Plan et Pr√©visionnel au Qu√©bec üçÅ\n\n## **Logiciels recommand√©s pour le Qu√©bec**\n\n### 1. **Finfrog** ‚≠ê (Qu√©b√©cois)\n- D√©velopp√© sp√©cifiquement pour le march√© qu√©b√©cois\n- Conforme aux normes comptables canadiennes\n- Support en fran√ßais\n- Int√©gration fiscale qu√©b√©coise\n\n### 2. **Modelwise** (Canadien)\n- Pr√©visionnels financiers robustes\n- Adapt√© au contexte canadien\n- Interface intuitive\n\n### 3. **LivePlan**\n- Version fran√ßaise disponible\n- Tr√®s populaire au Canada\n- Excellent pour d√©marrage d'entreprise\n\n## **Ressources gouvernementales GRATUITES**\n\n### **Investissement Qu√©bec**\n- Outils gratuits de planification\n- Mod√®les de business plan\n- www.investquebec.com\n\n### **Info entrepreneurs**\n- Guide complet gratuit\n- Mod√®les t√©l√©chargeables\n- www.infoentrepreneurs.org\n\n### **Banque de d√©veloppement du Canada (BDC)**\n- Mod√®les Excel gratuits\n- Calculateurs financiers\n- Accompagnement personnalis√©\n\n## **Structure d'un Business Plan Qu√©b√©cois**\n\n### **1. Sommaire ex√©cutif**\n- Vision et mission\n- Produits/services\n- March√© cible qu√©b√©cois\n\n### **2. Description de l'entreprise**\n- Forme juridique (SARL, Inc., travailleur autonome)\n- NEQ (num√©ro d'entreprise du Qu√©bec)\n- Secteur d'activit√© (code SCIAN)\n\n### **3. Analyse de march√©**\n- March√© qu√©b√©cois sp√©cifique\n- Concurrence locale\n- Tendances sectorielles\n\n### **4. Plan marketing**\n- Strat√©gie adapt√©e au Qu√©bec\n- Loi 101 (affichage en fran√ßais)\n-", "response_length": 1427, "sentiment": "positive", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "gestion compl√®te de la paie professionnel qu√©bec", "timestamp": "2025-11-14T15:05:43.369499", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Gestion compl√®te de la paie au Qu√©bec\n\n## Vue d'ensemble\n\nLa gestion de la paie au Qu√©bec est comp...", "competitors_mentioned": [], "full_response": "# Gestion compl√®te de la paie au Qu√©bec\n\n## Vue d'ensemble\n\nLa gestion de la paie au Qu√©bec est complexe en raison des obligations provinciales et f√©d√©rales. Voici un guide complet :\n\n## 1. **Inscriptions et num√©ros requis**\n\n### Palier f√©d√©ral (ARC)\n- Num√©ro d'entreprise (NE) - 9 chiffres\n- Compte de retenues sur la paie (RP) - Format : 123456789RP0001\n- Inscription √† Mon dossier d'entreprise\n\n### Palier provincial (Revenu Qu√©bec)\n- Num√©ro d'identification (NEQ)\n- Num√©ro de dossier d'employeur (10 chiffres)\n- Compte CNESST (sant√©-s√©curit√©)\n- Inscription au Registre des entreprises du Qu√©bec (REQ)\n\n## 2. **Retenues √† la source**\n\n### Retenues f√©d√©rales\n- **Imp√¥t f√©d√©ral** (selon les tables de l'ARC)\n- **Assurance-emploi (AE)** : 1,63% du salaire (max. 2023)\n- **R√©gime de pensions du Canada (RPC)** : 5,95% (exemption de base)\n\n### Retenues provinciales\n- **Imp√¥t provincial du Qu√©bec** (selon les tables de RQ)\n- **R√©gime qu√©b√©cois d'assurance parentale (RQAP)** : 0,494% du salaire\n- **R√©gime de rentes du Qu√©bec (RRQ)** : 6,40% (exemption de base)\n- **Fonds des services de sant√© (FSS)** : Variable selon la masse salariale\n\n### Autres retenues possibles\n- Cotisations syndicales\n- REER collectif\n- Assurances collectives\n- Saisies de salaire\n\n## 3. **Contributions de l'employeur**", "response_length": 1295, "sentiment": "neutral", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}, {"query": "externalisation comptable professionnel qu√©bec", "timestamp": "2025-11-14T15:05:56.768692", "platforms": {"chatgpt": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "claude": {"mentioned": true, "position": 1, "context_snippet": "# Externalisation comptable au Qu√©bec\n\n## Qu'est-ce que l'externalisation comptable?\n\nL'externalisat...", "competitors_mentioned": [], "full_response": "# Externalisation comptable au Qu√©bec\n\n## Qu'est-ce que l'externalisation comptable?\n\nL'externalisation comptable consiste √† confier tout ou partie de vos t√¢ches comptables √† un professionnel ou cabinet externe (CPA, technicien comptable).\n\n## Services g√©n√©ralement externalis√©s\n\n### Services de base\n- Tenue de livres\n- Enregistrement des transactions\n- Conciliation bancaire\n- Comptes clients/fournisseurs\n- Paie\n\n### Services sp√©cialis√©s\n- √âtats financiers\n- D√©clarations fiscales (TPS/TVQ, retenues √† la source)\n- Planification fiscale\n- Rapport de fin d'ann√©e\n\n## Avantages\n\n‚úÖ **R√©duction des co√ªts** - Pas besoin d'embaucher un comptable √† temps plein\n‚úÖ **Expertise professionnelle** - Acc√®s √† des CPA qualifi√©s\n‚úÖ **Conformit√©** - Respect des normes qu√©b√©coises et canadiennes\n‚úÖ **Concentration sur votre c≈ìur d'affaires**\n‚úÖ **Technologie √† jour** - Logiciels comptables professionnels\n\n## Types de professionnels au Qu√©bec\n\n1. **CPA (Comptable professionnel agr√©√©)** - Membre de l'Ordre des CPA du Qu√©bec\n2. **Technicien comptable** - Formation coll√©giale\n3. **Cabinet comptable** - √âquipe compl√®te\n\n## Co√ªts approximatifs\n\n- **Tenue de livres**: 50-150$/heure\n- **Services CPA**: 150-300$/heure\n- **Forfaits mensuels**: 200-2000$/mois selon la complexit√©\n\n## Comment choisir?\n\n- V√©rifier les accr√©ditations (Ordre des CPA)\n- Exp√©rience dans votre secteur\n- Outils technologiques utilis√©s\n- R√©f√©rences clients\n- Chimie et communication\n\nAvez-vous des besoins sp√©cif", "response_length": 1472, "sentiment": "neutral", "invisibility_reasons": []}, "perplexity": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "gemini": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}, "google_ai": {"mentioned": true, "position": 1, "context_snippet": "", "competitors_mentioned": [], "full_response": "", "response_length": 0, "sentiment": "neutral", "invisibility_reasons": []}}}], "summary": {"total_queries": 100, "global_visibility": 1.0, "by_platform": {"chatgpt": 1.0, "claude": 1.0, "perplexity": 1.0, "gemini": 1.0, "google_ai": 1.0}}};
        
        // Initialiser le dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderMetrics();
            renderTable();
        });
        
        // Afficher les m√©triques
        function renderMetrics() {
            const metrics = document.getElementById('metrics-grid');
            const summary = queryData.summary || {};
            const platforms = summary.by_platform || {};
            
            // M√©trique globale
            metrics.innerHTML = `
                <div class="metric-tile clickable" onclick="showGlobalDetails()">
                    <div class="metric-label">Visibilit√© Globale</div>
                    <div class="metric-value">${(summary.global_visibility * 100).toFixed(1)}%</div>
                    <div class="metric-change trend-neutral">Moyenne 5 plateformes</div>
                </div>
            `;
            
            // M√©triques par plateforme
            const platformNames = {
                'chatgpt': 'ChatGPT',
                'claude': 'Claude',
                'perplexity': 'Perplexity',
                'gemini': 'Gemini',
                'google_ai': 'Google AI'
            };
            
            for (const [key, name] of Object.entries(platformNames)) {
                const score = (platforms[key] || 0) * 100;
                const trendClass = score > 20 ? 'trend-up' : score > 0 ? 'trend-neutral' : 'trend-down';
                
                metrics.innerHTML += `
                    <div class="metric-tile clickable" onclick="showPlatformDetails('${key}')">
                        <div class="metric-label">${name}</div>
                        <div class="metric-value">${score.toFixed(1)}%</div>
                        <div class="metric-change ${trendClass}">${score > 0 ? '‚úì' : '‚úó'} Test√©</div>
                    </div>
                `;
            }
        }
        
        // Afficher le tableau
        function renderTable() {
            const tbody = document.getElementById('queries-tbody');
            tbody.innerHTML = '';
            
            const queries = queryData.queries || [];
            
            queries.forEach((queryObj, index) => {
                const platforms = queryObj.platforms || {};
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${queryObj.query}</strong></td>
                    ${renderPlatformCell(queryObj.query, 'chatgpt', platforms.chatgpt)}
                    ${renderPlatformCell(queryObj.query, 'claude', platforms.claude)}
                    ${renderPlatformCell(queryObj.query, 'perplexity', platforms.perplexity)}
                    ${renderPlatformCell(queryObj.query, 'gemini', platforms.gemini)}
                    ${renderPlatformCell(queryObj.query, 'google_ai', platforms.google_ai)}
                    <td>
                        <button class="action-button" onclick="retestQuery('${queryObj.query}')" style="padding: 8px 16px; font-size: 13px;">
                            üîÑ Re-tester
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function renderPlatformCell(query, platform, data) {
            const mentioned = data && data.mentioned;
            const statusClass = mentioned ? 'status-visible' : 'status-invisible';
            const statusText = mentioned ? '‚úÖ Visible' : '‚ùå Invisible';
            
            return `
                <td class="clickable-cell ${statusClass}" onclick="showQueryDetails('${query}', '${platform}')">
                    ${statusText}
                </td>
            `;
        }
        
        // Afficher d√©tails d'une requ√™te
        function showQueryDetails(query, platform) {
            const queryObj = queryData.queries.find(q => q.query === query);
            if (!queryObj) return;
            
            const platformData = queryObj.platforms[platform];
            if (!platformData) return;
            
            let modalContent = `
                <h2 style="margin-bottom: 10px;">üîç D√©tails: "${query}"</h2>
                <h3 style="color: #666; margin-bottom: 30px;">Plateforme: ${platform.toUpperCase()}</h3>
                
                <div class="detail-section">
                    <div class="detail-title">Statut</div>
                    <p style="font-size: 24px; font-weight: 600;">
                        ${platformData.mentioned ? 
                            `‚úÖ <span style="color: #28a745;">Visible</span>${platformData.position ? ` - Position ${platformData.position}` : ''}` : 
                            `‚ùå <span style="color: #dc3545;">Invisible</span>`
                        }
                    </p>
                </div>
            `;
            
            if (platformData.mentioned && platformData.context_snippet) {
                modalContent += `
                    <div class="detail-section">
                        <div class="detail-title">Contexte de la Mention</div>
                        <p style="background: #f8f9fa; padding: 20px; border-radius: 12px; line-height: 1.8;">
                            "${platformData.context_snippet}"
                        </p>
                    </div>
                `;
                
                if (platformData.competitors_mentioned && platformData.competitors_mentioned.length > 0) {
                    modalContent += `
                        <div class="detail-section">
                            <div class="detail-title">Comp√©titeurs √âgalement Cit√©s</div>
                            <ul style="padding-left: 20px;">
                                ${platformData.competitors_mentioned.map(c => `<li style="margin: 8px 0;">${c}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            } else {
                // Afficher les raisons d'invisibilit√©
                const reasons = platformData.invisibility_reasons || [];
                
                if (reasons.length > 0) {
                    modalContent += `
                        <div class="detail-section">
                            <div class="detail-title">üö® Pourquoi Vous √ätes Invisible</div>
                    `;
                    
                    reasons.forEach(reason => {
                        modalContent += `
                            <div class="reason-card severity-${reason.severity.toLowerCase()}">
                                <h4>${reason.explanation}</h4>
                                <p><strong>Action:</strong> ${reason.action}</p>
                                ${reason.example_title ? `<p style="font-style: italic; color: #666;">Exemple: ${reason.example_title}</p>` : ''}
                                <p><strong>Impact estim√©:</strong> <span style="color: #28a745; font-weight: 600;">${reason.estimated_impact}</span></p>
                            </div>
                        `;
                    });
                    
                    modalContent += `</div>`;
                }
                
                // Comp√©titeurs qui apparaissent
                if (platformData.competitors_mentioned && platformData.competitors_mentioned.length > 0) {
                    modalContent += `
                        <div class="detail-section">
                            <div class="detail-title">üèÜ Qui Appara√Æt √† Votre Place</div>
                            <ul style="padding-left: 20px;">
                                ${platformData.competitors_mentioned.map(c => `<li style="margin: 8px 0;">${c}</li>`).join('')}
                            </ul>
                            <p style="margin-top: 15px; color: #666; font-style: italic;">Analysez ces comp√©titeurs pour comprendre ce qu'ils font mieux.</p>
                        </div>
                    `;
                }
            }
            
            // R√©ponse compl√®te (collapsible)
            if (platformData.full_response) {
                modalContent += `
                    <div class="detail-section">
                        <details style="cursor: pointer;">
                            <summary style="font-weight: 600; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                üìÑ Voir la R√©ponse Compl√®te du LLM
                            </summary>
                            <pre style="background: #f8f9fa; padding: 25px; border-radius: 12px; overflow-x: auto; white-space: pre-wrap; margin-top: 15px; line-height: 1.6;">
${platformData.full_response}
                            </pre>
                        </details>
                    </div>
                `;
            }
            
            modalContent += `
                <button class="action-button" onclick="closeModal()" style="margin-top: 25px;">Fermer</button>
            `;
            
            document.getElementById('modal-body').innerHTML = modalContent;
            document.getElementById('details-modal').classList.add('active');
        }
        
        // Afficher d√©tails globaux
        function showGlobalDetails() {
            const summary = queryData.summary || {};
            
            let modalContent = `
                <h2>üìä Analyse Globale de Visibilit√©</h2>
                
                <div class="detail-section">
                    <p style="font-size: 18px;"><strong>Visibilit√© Globale:</strong> ${(summary.global_visibility * 100).toFixed(1)}%</p>
                    <p style="font-size: 18px;"><strong>Requ√™tes test√©es:</strong> ${queryData.queries ? queryData.queries.length : 0}</p>
                </div>
                
                <div class="detail-section">
                    <div class="detail-title">üéØ Recommandations Prioritaires</div>
                    <div class="reason-card severity-critical">
                        <h4>Cr√©er du contenu √©ducatif</h4>
                        <p>Votre faible visibilit√© indique un manque de contenu informatif et √©ducatif. Cr√©ez 10-15 articles de 2000+ mots sur des sujets pertinents.</p>
                    </div>
                    <div class="reason-card severity-high">
                        <h4>Ajouter des statistiques et donn√©es</h4>
                        <p>Les IA privil√©gient le contenu riche en donn√©es. Ajoutez 10-15 statistiques avec sources dans chaque page principale.</p>
                    </div>
                    <div class="reason-card severity-high">
                        <h4>Impl√©menter des schemas JSON-LD</h4>
                        <p>Ajoutez Organization, Article et FAQPage schemas pour am√©liorer la compr√©hension par les IA.</p>
                    </div>
                </div>
                
                <button class="action-button" onclick="closeModal()">Fermer</button>
            `;
            
            document.getElementById('modal-body').innerHTML = modalContent;
            document.getElementById('details-modal').classList.add('active');
        }
        
        // Afficher d√©tails d'une plateforme
        function showPlatformDetails(platform) {
            const platformNames = {
                'chatgpt': 'ChatGPT',
                'claude': 'Claude',
                'perplexity': 'Perplexity',
                'gemini': 'Gemini',
                'google_ai': 'Google AI'
            };
            
            const summary = queryData.summary || {};
            const visibility = ((summary.by_platform || {})[platform] || 0) * 100;
            
            let modalContent = `
                <h2>üìä Analyse ${platformNames[platform]}</h2>
                
                <div class="detail-section">
                    <p style="font-size: 20px; font-weight: 600;">Visibilit√©: ${visibility.toFixed(1)}%</p>
                </div>
                
                <div class="detail-section">
                    <div class="detail-title">üìã Requ√™tes Test√©es</div>
                    <p>Cliquez sur n'importe quelle requ√™te dans le tableau pour voir les d√©tails sp√©cifiques √† ${platformNames[platform]}.</p>
                </div>
                
                <button class="action-button" onclick="closeModal()">Fermer</button>
            `;
            
            document.getElementById('modal-body').innerHTML = modalContent;
            document.getElementById('details-modal').classList.add('active');
        }
        
        // Fermer modal
        function closeModal() {
            document.getElementById('details-modal').classList.remove('active');
        }
        
        // Fermer modal en cliquant en dehors
        document.getElementById('details-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // Ajouter une requ√™te personnalis√©e
        document.getElementById('add-query-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newQuery = document.getElementById('new-query').value;
            const priority = document.getElementById('query-priority').value;
            
            alert(`Fonctionnalit√© en d√©veloppement!\n\nRequ√™te "${newQuery}" sera test√©e avec priorit√© ${priority}.\n\nPour l'instant, ajoutez manuellement la requ√™te dans queries_config.json et relancez l'analyse.`);
            
            document.getElementById('new-query').value = '';
        });
        
        // Re-tester une requ√™te
        function retestQuery(query) {
            if (confirm(`Re-tester la requ√™te "${query}" sur toutes les plateformes ?\n\nNote: Cette fonctionnalit√© n√©cessite l'API Flask active.`)) {
                alert('Fonctionnalit√© en d√©veloppement!\n\nPour l'instant, relancez une analyse compl√®te pour re-tester les requ√™tes.');
            }
        }
    </script>
</body>
</html>